HTTP (REST) API
===============

Обзор API
---------
Предоставляемый API Сервиса отправки SMS сообщений позволяет осуществить:

* Аутентификацию
* Отправку SMS-сообщения на один номер без учета часового пояса получателя
* Отправку SMS-сообщения на один номер с учетом часового пояса получателя
* Отправку SMS-сообщения на несколько номеров без учета часового пояса получателя
* Получение статуса отправленного SMS-сообщения
* Получение SMS-сообщений за период
* Получение статистики по SMS-рассылкам
* Получение баланса авторизованного Пользователя

API Сервиса отправки SMS сообщений организовано в соответствии с принципами REST, что позволяет обмениваться HTTPS URL–encoded запросами. HTTPS - это обычный HTTP, работающий через шифрованные транспортные механизмы SSL и TLS. Это позволяет обеспечить защиту от атак, основанных на прослушивании сетевого соединения: снифферских атак и атак типа man-in-the-middle при условии, что будут использоваться шифрующие средства и сертификат сервера проверен и ему доверяют. 

Запрос к API состоит из следующих элементов:
===============

* Основного URL запроса: https://integrationapi.net/rest/ 
* Ресурса, например: /Sms/SendByTimeZone 
* Параметров GET или POST-запроса (в кодировке UTF-8)

Сервис создает идентификатор сессии в Системе после прохождения аутентификации данных,  передаваемых сервису в GET-запросе следующего формата:

	 https://integrationapi.net/rest/user/sessionid?login=<Логин>&password=<Пароль>

Параметры запроса представляют собой последовательность пар вида {имя параметра}={значение параметра}, разделенных символом амперсанда (&).   Content-Type для параметров запроса:   application/x-www-form-urlencoded   Это формат для кодирования пар «ключ-значение» с возможностью дублирования ключей. Каждая пара ключ-значение отделяется символом «&», ключ отделен от значения символом «=».  
При этом пробелы должны заменяться на знак «+», а затем, используя URL-кодирование, могут быть заменены все на буквенно-цифровые символы. 
Например:
	 login: Jonathan  password: a + b == 13 %!  

Должно быть закодировано как:  
         login=Jonathan+Do&password=a+%2B+b+%3D%3D+13%25%21  

Ниже приведен пример запроса:
	 https://integrationapi.net/rest/user/sessionid?login=test&password=11111   

В Табл. 1 приводится полный список параметров GET-запроса. 
Табл. 1. Параметры GET-запроса для аутентификации  

+--------------------+------------+-----------------------------------+
|      Параметр      | Тип данных |    Описание                       |
+====================+============+===================================+
|                        Обязательные параметры                       |
+--------------------+------------+-----------------------------------+
| Login              |   String   |  Логин,полученный при регистрации |
+--------------------+------------+-----------------------------------+
| Password           |   String   |  Пароль, соответствующий логину   |
+--------------------+------------+-----------------------------------+

В случае успешного прохождения аутентификации присланных данных, сервис отправки SMS сообщений пришлет ответ со следующими параметрами: 
	HTTP status code: 200 ОК (статус «OperationComplete»);  

	Cache-Control: private (указание на то, что ответ разрешается сохранять только в закрытом кэше, т.е. только для этого Пользователя);  


	Connection: Keep-Alive (наименование заголовка соединения, которое не надо обновлять в кэше);  
Content-Type: application/json; charset=utf-8 (фактически значение вернется в виде строки в кавычках, а не в виде JSON) и кодировке utf-8); “Идентификатор сессии (GUID)”

Ниже приведен пример ответа:
	HTTP/1.1 200 OK       
	Cache-Control: private       
	Connection: Keep-Alive      
	Content-Type: application/json; charset=utf-8       
	"Z5CYSZEKDL1DPICU37WEHQVOYKP0T1GSLHX1"  
В случае возникновения исключительной ситуации во время обработки запроса или ошибки аутентификации, Сервис возвращает Код ошибки (см. Табл. 10) в виде JSON следующего формата: 
       {  
       
	Code: <Код ошибки>, Desc: <”Текст ошибки”>  
	
	}  
Например, при ошибке авторизации: 
	 {  
	 
	 Code: 4,  
	 
	 Desc: "Invalid user login or password" 
	 
	 }  
Полученный идентификатор сессии действителен в течение 120 минут.

